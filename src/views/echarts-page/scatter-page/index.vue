<!--
 * @Description: 散点图
 * @Autor: Alfred
 * @Date: 2022-06-09 17:24:44
 * @FilePath: /main-project/src/views/echarts-page/scatter-page/index.vue
-->
<template>
  <div class="scatter-page">
    <div class="first-line border-2">
      <base-echarts
        :option="containerOption"
        width="100%"
        height="100%"
        class="container"
        :brush-end="handleBrushEnd"
      ></base-echarts>
    </div>
  </div>
</template>

<script lang="ts" setup>
import BaseEcharts from '@/components/base-echarts/index.vue'
const containerOption = shallowRef({})

const option = {
  title: {
    text: '散点图可横向框选',
    top: '4%',
    left: 'center',
    textStyle: {
      fontWeight: 700,
      fontSize: '18',
      color: '#000'
    }
  },
  tooltip: {
    trigger: 'item',
    confine: true,
    backgroundColor: 'rgba(0,0,0,.6)',
    borderColor: '#4D505D',
    borderWidth: 1,
    textStyle: {
      color: '#ffffff'
    }
  },
  xAxis: {
    splitLine: {
      show: false
    },
    nameLocation: 'center',
    name: '最高温度',
    nameTextStyle: {
      fontWeight: '700',
      fontSize: '12',
      color: '#000000'
    },
    nameGap: 30
  },
  toolbox: {
    show: true,
    feature: {
      brush: {
        type: ['lineX', 'clear']
      }
    }
  },
  brush: {
    btoolbox: ['lineX', 'clear'],
    brushType: 'lineX',
    xAxisIndex: 0,
    throttleType: 'debounce',
    throttleDelay: 1000,
    outOfBrush: {
      colorAlpha: 1
    },
    brushStyle: {
      borderWidth: 1,
      color: 'rgba(38, 107, 255, 0.1)',
      borderColor: 'rgba(38, 107, 255, 0.8)'
    }
  },
  yAxis: {
    splitLine: {
      show: false
    },
    name: 'AQI',
    nameTextStyle: {
      fontWeight: '700',
      fontSize: '12',
      color: '#000000'
    },
    min: 0
  },
  grid: {
    right: '9%',
    left: 60,
    top: '22%',
    bottom: '20%',
    show: true,
    borderColor: '#000000',
    borderWidth: 1
  },
  visualMap: {
    type: 'continuous',
    min: 0,
    max: 315,
    dimension: 2,
    orient: 'vertical',
    right: 5,
    top: '20%',
    itemHeight: 150,
    text: ['主导风（16分级）'],
    calculable: true,
    inRange: {
      color: ['#069CEE', '#4FC950', '#50CA4B', '#FFF825', '#FFFB30', '#FF4C23', '#FE281E']
    },
    textGap: 25,
    textStyle: {
      fontWeight: 700,
      fontSize: '12',
      color: '#000'
    }
  },
  series: [
    {
      symbolSize: 10,
      data: [
        [-28, 29, 112.5],
        [-30, 43, 135],
        [31.7, 49, 135],
        [-29.2, 55, 67.5],
        [28.3, 50, 67.5],
        [28, 33, 112.5],
        [23.8, 26, 112.5],
        [28.5, 33, 0],
        [-33.1, 50, 90],
        [-31.1, 87, 90],
        [32.5, 52, 180],
        [24.7, 22, 270],
        [26.1, 53, 90],
        [24.7, 28, 0],
        [28.8, 26, 90],
        [26.1, 43, 67.5],
        [28.3, 33, 90],
        [28.9, 30, 112.5],
        [24.8, 19, 112.5],
        [23.2, 19, 90],
        [30.1, 32, 67.5],
        [35, 57, 135],
        [29.5, 36, 292.5],
        [27.5, 23, 180],
        [28.9, 38, 157.5],
        [31.7, 53, 135],
        [33.9, 55, 112.5],
        [34.9, 52, 135],
        [29.8, 25, 292.5],
        [32.4, 57, 135],
        [30, 22, 135],
        [30.2, 39, 90],
        [29.6, 19, 292.5],
        [27.7, 19, 90],
        [25, 35, 90],
        [29.2, 20, 270],
        [26.4, 29, 135],
        [32.9, 39, 135],
        [26.9, 19, 90],
        [32.1, 18, 180],
        [29.8, 19, 90],
        [33.5, 49, 112.5],
        [32.3, 42, 135],
        [29.9, 33, 67.5],
        [30.5, 60, 112.5],
        [27.7, 25, 90],
        [26.7, 35, 135],
        [33.9, 29, 180],
        [28.4, 19, 225],
        [26, 18, 112.5],
        [29.7, 18, 112.5],
        [33.9, 22, 135],
        [24.5, 39, 270],
        [24.6, 50, 292.5],
        [23.1, 50, 315],
        [25.7, 74, 45],
        [29.3, 118, 112.5],
        [29.3, 105, 112.5],
        [31.5, 97, 112.5],
        [29.2, 96, 112.5],
        [29.2, 66, 112.5],
        [29.5, 59, 90],
        [28.9, 68, 90],
        [29.5, 83, 225],
        [32.7, 91, 90],
        [34.1, 142, 112.5],
        [28.7, 115, 90],
        [24.9, 54, 112.5],
        [24.5, 73, 67.5],
        [25.6, 75, 135],
        [27.8, 62, 112.5],
        [26.5, 70, 67.5],
        [24.6, 64, 67.5],
        [26.4, 70, 157.5],
        [26.6, 68, 157.5],
        [30.5, 99, 180],
        [24, 52, 67.5],
        [22, 40, 45],
        [26, 74, 0],
        [29.6, 115, 247.5],
        [31.1, 112, 180],
        [27.6, 100, 180],
        [32.1, 83, 67.5],
        [30, 102, 90],
        [31.5, 42, 67.5],
        [28.7, 26, 90],
        [22.3, 25, 112.5],
        [23.7, 38, 270],
        [27.3, 52, 292.5],
        [29.6, 89, 135],
        [31.5, 85, 180],
        [23.4, 15, 22.5],
        [29.2, 22, 90],
        [25.1, 22, 90],
        [21.9, 32, 67.5],
        [26.8, 59, 67.5],
        [28.1, 49, 135],
        [27.4, 43, 112.5],
        [29.6, 42, 90],
        [28.7, 38, 112.5],
        [24.7, 19, 292.5],
        [30.3, 49, 292.5],
        [27.3, 62, 90],
        [23.9, 18, 90],
        [25.9, 57, 135],
        [30.1, 46, 225],
        [28.7, 77, 247.5],
        [29.7, 74, 270],
        [29.7, 80, 135],
        [27.7, 64, 135],
        [30, 52, 90],
        [31.5, 39, 135],
        [28.3, 53, 90],
        [27.4, 42, 135],
        [24.6, 43, 90],
        [28, 70, 0],
        [27.5, 68, 225],
        [30.5, 54, 135],
        [31.6, 45, 112.5],
        [29.6, 45, 90],
        [24.1, 42, 67.5],
        [25.6, 69, 247.5],
        [30.9, 33, 292.5],
        [33.8, 57, 180],
        [34.5, 73, 135],
        [32.3, 43, 67.5],
        [31.3, 36, 90],
        [28.7, 42, 90],
        [30.1, 33, 112.5],
        [32.9, 38, 90],
        [29.9, 38, 45],
        [26.7, 23, 67.5],
        [29.5, 33, 90],
        [23.4, 38, 67.5],
        [25.3, 26, 135],
        [28.3, 35, 135],
        [35.8, 55, 180],
        [36.1, 36, 225],
        [34.1, 20, 225],
        [31.7, 22, 292.5],
        [32.5, 32, 135],
        [29.9, 30, 135],
        [32.1, 38, 270],
        [31.7, 40, 135],
        [28.3, 16, 112.5],
        [28.1, 33, 67.5],
        [31.3, 25, 180],
        [30.4, 35, 202.5],
        [26.8, 18, 0],
        [30.1, 23, 90],
        [30.8, 95, 112.5],
        [24.8, 70, 112.5],
        [25.7, 35, 67.5],
        [25.7, 25, 157.5],
        [27.8, 74, 270],
        [31.7, 87, 135],
        [24.9, 50, 135],
        [23.9, 52, 202.5],
        [26.3, 50, 135],
        [27.6, 60, 180],
        [31.9, 70, 247.5],
        [34.2, 70, 180],
        [31.3, 87, 202.5],
        [34.3, 57, 180],
        [27.4, 77, 90],
        [21.8, 48, 90],
        [24, 25, 45],
        [26.6, 36, 112.5],
        [28.6, 64, 135],
        [29.9, 49, 45],
        [27.6, 85, 112.5],
        [24.2, 50, 67.5],
        [27.1, 90, 67.5],
        [31, 98, 112.5],
        [33.8, 48, 315],
        [24.4, 32, 90],
        [21.6, 18, 90],
        [22.5, 20, 112.5],
        [27.6, 57, 180],
        [30.2, 75, 315],
        [20.4, 52, 45],
        [23.8, 68, 90],
        [19.3, 38, 270],
        [22.9, 42, 292.5],
        [26.4, 54, 90],
        [28, 67, 67.5],
        [26.9, 97, 67.5],
        [24.5, 70, 67.5],
        [25.7, 68, 112.5],
        [29.5, 58, 112.5],
        [31.2, 64, 112.5],
        [23.6, 32, 90],
        [29.4, 53, 135],
        [32.8, 64, 180],
        [31.8, 82, 292.5],
        [27.9, 102, 202.5],
        [31, 84, 135],
        [32.6, 52, 157.5],
        [30.8, 19, 157.5],
        [28.4, 12, 202.5],
        [30.5, 79, 45],
        [29.9, 42, 247.5],
        [32.5, 60, 157.5],
        [28.6, 55, 0],
        [22.7, 30, 247.5],
        [27.3, 33, 135],
        [22.9, 28, 247.5],
        [23.9, 23, 157.5],
        [27.8, 30, 180],
        [32.8, 38, 180]
      ],
      type: 'scatter'
    }
  ]
}

function handleBrushEnd(params: any) {
  console.log('刷选的区域', params)
}

onMounted(() => {
  containerOption.value = option
})
</script>

<style lang="scss" scoped>
.scatter-page {
  width: 100%;
  height: 100%;
  .first-line {
    width: 100%;
    height: 400px;
    margin-bottom: 20px;
  }
}
</style>
